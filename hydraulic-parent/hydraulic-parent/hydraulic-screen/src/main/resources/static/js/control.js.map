{"version":3,"sources":["webpack:///static/js/control.js","webpack:///./src/pages/screen/control/vue/control.vue","webpack:///./src/common/lib/axios.js","webpack:///src/pages/screen/control/vue/control.vue","webpack:///./src/pages/screen/control/vue/control.vue?32ee","webpack:///./src/pages/screen/control/control.js"],"names":["webpackJsonp","+skl","module","exports","1","__webpack_require__","HVf8","IUPf","J9oB","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","vue","vue_default","n","iview","iview_default","vue_bus_esm","promise","promise_default","axios","axios_default","AjaxUtil","ROOT","ajax","create","baseURL","timeout","responseType","interceptors","response","use","data","error","reject","lib","lib_default","render","_vm","this","_h","$createElement","_c","_self","staticStyle","on","drawerMove","attrs","model","callback","$$v","setDrawer","expression","stationChange","selectStationId","_l","station","key","id","_v","_s","name","initAlarmDialog","staticClass","slot","selectStationName","outsideVal","foreVal","class","isAlarm","insideVal","count","pumpData","va","aa","vb","ab","vc","ac","alarmDialogModal","closable","alarmDialogCancel","$set","ref","alarmForm","switchChange","scopedSlots","_u","fn","proxy","status","f","index","item","openid","nickName","loading","alarmDialogSubmit","staticRenderFns","esExports","normalizeComponent","__vue_styles__","Component","Vue","iView","VueBus","el","components","controlComponent"],"mappings":"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","file":"static/js/control.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"+skl\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"J9oB\");\n\n\n/***/ }),\n\n/***/ \"HVf8\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"IUPf\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"J9oB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.js\nvar vue = __webpack_require__(\"4bK6\");\nvar vue_default = /*#__PURE__*/__webpack_require__.n(vue);\n\n// EXTERNAL MODULE: ./node_modules/iview/dist/iview.js\nvar iview = __webpack_require__(\"BTaQ\");\nvar iview_default = /*#__PURE__*/__webpack_require__.n(iview);\n\n// EXTERNAL MODULE: ./node_modules/vue-bus/dist/vue-bus.esm.js\nvar vue_bus_esm = __webpack_require__(\"fC7K\");\n\n// EXTERNAL MODULE: ./node_modules/iview/dist/styles/iview.css\nvar styles_iview = __webpack_require__(\"+skl\");\nvar styles_iview_default = /*#__PURE__*/__webpack_require__.n(styles_iview);\n\n// EXTERNAL MODULE: ./src/common/css/common.css\nvar common = __webpack_require__(\"HVf8\");\nvar common_default = /*#__PURE__*/__webpack_require__.n(common);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"mtWM\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/common/lib/axios.js\n\n\n\nvar AjaxUtil = {\n  ROOT: '/screen'\n};\n\nAjaxUtil.ajax = axios_default.a.create({\n  baseURL: AjaxUtil.ROOT,\n  timeout: 120000,\n  responseType: 'json'\n});\n\nAjaxUtil.ajax.interceptors.response.use(function (response) {\n  return response.data;\n}, function (error) {\n  return promise_default.a.reject(error);\n});\n\n/* harmony default export */ var lib_axios = (AjaxUtil);\n// EXTERNAL MODULE: ./node_modules/qs/lib/index.js\nvar lib = __webpack_require__(\"mw3O\");\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./node_modules/iview-loader??ref--0-1!./src/pages/screen/control/vue/control.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var control = ({\n  name: 'control',\n  data: function data() {\n    return {\n      selectStationId: 1,\n      selectStationName: '',\n      setDrawer: false,\n      isAlarm: false,\n      insideVal: 0.01,\n      foreVal: 0.01,\n      outsideVal: 0.01,\n      timer: '',\n      receiverList: [],\n      stationList: [],\n      pumpData: [],\n      pumpCount: 4,\n      frequencyList: [\"5\", \"10\", \"15\", \"30\", \"45\", \"60\"],\n      alarmDialogModal: {\n        modal: false,\n        closable: false,\n        loading: false\n      },\n      alarmForm: {\n        id: null,\n        stationId: 1,\n        alarmName: \"\",\n        alarmLine: 0.00,\n        frequency: 5,\n        receivers: [],\n        status: 0\n      }\n    };\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.getStationList();\n      this.getWaterLine();\n      this.getPumpData();\n      this.timer = setInterval(function () {\n        _this.initData();\n      }, 10000);\n    },\n    initData: function initData() {\n      this.getWaterLine();\n      this.getPumpData();\n    },\n    getPumpCount: function getPumpCount() {\n      var _this2 = this;\n\n      lib_axios.ajax.post('/control/getPumpCount?stationId=' + this.selectStationId).then(function (data) {\n        if (null != data) {\n          _this2.pumpCount = data;\n        }\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    getStationList: function getStationList() {\n      var _this3 = this;\n\n      lib_axios.ajax.post('/station/getStationData').then(function (data) {\n        if (null != data) {\n          _this3.stationList = data.stationList;\n          _this3.selectStationId = data.defaultStation.id;\n          _this3.selectStationName = data.defaultStation.name;\n        }\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    stationChange: function stationChange(stationVal) {\n      this.selectStationId = stationVal.value;\n      this.selectStationName = stationVal.label;\n      this.alarmForm.stationId = stationVal.value;\n      this.initData();\n    },\n    drawerMove: function drawerMove() {\n      this.setDrawer = true;\n    },\n    getWXReceivers: function getWXReceivers() {\n      var _this4 = this;\n\n      lib_axios.ajax.post('/control/getWXReceivers').then(function (data) {\n        if (null != data) {\n          _this4.receiverList = data;\n        }\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    getPumpData: function getPumpData() {\n      var _this5 = this;\n\n      lib_axios.ajax.post('/control/getPumpData?stationId=' + this.selectStationId).then(function (data) {\n        if (null != data) {\n          // this.pumpCount=data.length\n          _this5.pumpData = data;\n        }\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    getWaterLine: function getWaterLine() {\n      var _this6 = this;\n\n      lib_axios.ajax.post('/control/getWaterLine?stationId=' + this.selectStationId).then(function (data) {\n        var code = data.code;\n        if (\"200\" !== code) {\n          return;\n        }\n        var alarmLine = data.alarmLine;\n        _this6.insideVal = data.insideVal;\n        _this6.outsideVal = data.outsideVal;\n        _this6.foreVal = data.foreVal;\n        if (alarmLine !== 0 && _this6.insideVal >= alarmLine) {\n          _this6.isAlarm = true;\n        } else {\n          _this6.isAlarm = false;\n        }\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    alarmDialogSubmit: function alarmDialogSubmit() {\n      var _this7 = this;\n\n      this.alarmDialogModal.loading = true;\n      if (!this.formValidate()) {\n        return;\n      }\n      var reqData = lib_default.a.stringify(this.alarmForm, { allowDots: true });\n      lib_axios.ajax.post('/control/alarmConfigSave', reqData).then(function (resp) {\n        if (resp) {\n          _this7.$Message.success('报警设置成功！');\n        } else {\n          _this7.confirmAlert('报警设置失败！');\n        }\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n      this.alarmDialogCancel();\n    },\n    formValidate: function formValidate() {\n      if (this.alarmForm.alarmName == '') {\n        this.confirmAlert('报警名称不能为空');\n        return false;\n      }\n      if (this.alarmForm.alarmLine == '') {\n        this.confirmAlert('报警水位不能为空');\n        return false;\n      }\n      if (this.alarmForm.receivers.length == 0) {\n        this.confirmAlert('通知人不能为空');\n        return false;\n      }\n      return true;\n    },\n    confirmAlert: function confirmAlert(message) {\n      var content = '<p>' + message + '</p>';\n      this.$Message.warning({\n        content: content,\n        duration: 3\n      });\n    },\n    alarmMessage: function alarmMessage(alarmLine) {\n      this.$Message.error({\n        background: true,\n        content: '当前内河水位已超' + alarmLine + '米的警戒水位，请及时处置！',\n        top: 50,\n        duration: 3\n      });\n    },\n    switchChange: function switchChange(flag) {\n      this.alarmForm.status = flag ? 1 : 0;\n    },\n    initAlarmDialog: function initAlarmDialog() {\n      var _this8 = this;\n\n      this.getWXReceivers();\n      lib_axios.ajax.post('/control/getAlarmConfig?stationId=' + this.alarmForm.stationId).then(function (form) {\n        if (form) {\n          _this8.alarmForm.id = form.id;\n          _this8.alarmForm.alarmName = form.alarmName;\n          _this8.alarmForm.alarmLine = form.alarmLine;\n          _this8.alarmForm.receivers = form.receivers;\n          _this8.alarmForm.frequency = form.frequency;\n          _this8.alarmForm.status = form.status;\n        }\n        _this8.alarmDialogModal.modal = true;\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    alarmDialogCancel: function alarmDialogCancel() {\n      this.alarmDialogModal.modal = false;\n      this.alarmDialogModal.closable = true;\n      this.alarmDialogModal.loading = false;\n      this.alarmForm.id = null;\n      this.alarmForm.status = 0;\n      this.alarmForm.frequency = 5;\n      this.alarmForm.alarmName = \"\";\n      this.alarmForm.alarmLine = 0.00;\n      this.alarmForm.receivers = [];\n    }\n  },\n  created: function created() {\n    this.init();\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a18f33b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/iview-loader??ref--0-1!./src/pages/screen/control/vue/control.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin\":\"10px\"},on:{\"click\":_vm.drawerMove}},[_c('Drawer',{attrs:{\"title\":\"泵站设置\",\"placement\":\"left\",\"closable\":false},model:{value:(_vm.setDrawer),callback:function ($$v) {_vm.setDrawer=$$v},expression:\"setDrawer\"}},[_c('Select',{staticStyle:{\"margin-top\":\"60px\",\"width\":\"200px\",\"margin-left\":\"15px\"},attrs:{\"label-in-value\":true},on:{\"on-change\":_vm.stationChange},model:{value:(_vm.selectStationId),callback:function ($$v) {_vm.selectStationId=$$v},expression:\"selectStationId\"}},_vm._l((_vm.stationList),function(station){return _c('Option',{key:station.id,attrs:{\"value\":station.id}},[_vm._v(_vm._s(station.name))])}),1),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-top\":\"60px\",\"margin-left\":\"15px\",\"width\":\"200px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.initAlarmDialog}},[_vm._v(\"水位报警设置\")])],1),_vm._v(\" \"),_c('card',{staticClass:\"card-top\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.selectStationName))]),_vm._v(\" \"),_c('div',[_c('card',{staticClass:\"card-content\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"外河水位\")]),_vm._v(\"\\n        \"+_vm._s(_vm.outsideVal)+\" 米\\n      \")]),_vm._v(\" \"),_c('card',{staticClass:\"card-content\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"前池水位\")]),_vm._v(\"\\n        \"+_vm._s(_vm.foreVal)+\" 米\\n      \")]),_vm._v(\" \"),_c('card',{staticClass:\"card-content\",class:_vm.isAlarm ? 'warnFont' : '',attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"内河水位\")]),_vm._v(\"\\n        \"+_vm._s(_vm.insideVal)+\" 米\\n      \")]),_vm._v(\" \"),_vm._l((_vm.pumpCount),function(count){return _c('div',{key:count,staticStyle:{\"display\":\"inline-block\"},attrs:{\"value\":count}},[_c('card',{staticClass:\"card-building\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(count)+\"#机组\")]),_vm._v(\" \"),_c('p',[_vm._v(\"A相电压:\"+_vm._s(_vm.pumpData[count-1].va)+\"V；A相电流:\"+_vm._s(_vm.pumpData[count-1].aa)+\"A\")]),_vm._v(\" \"),_c('p',[_vm._v(\"B相电压:\"+_vm._s(_vm.pumpData[count-1].vb)+\"V；B相电流:\"+_vm._s(_vm.pumpData[count-1].ab)+\"A\")]),_vm._v(\" \"),_c('p',[_vm._v(\"C相电压:\"+_vm._s(_vm.pumpData[count-1].vc)+\"V；C相电流:\"+_vm._s(_vm.pumpData[count-1].ac)+\"A\")])])],1)})],2)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"水位告警配置\",\"closable\":false,\"width\":\"45\",\"closable\":\"\",\"mask-closable\":_vm.alarmDialogModal.closable},on:{\"on-cancel\":_vm.alarmDialogCancel},model:{value:(_vm.alarmDialogModal.modal),callback:function ($$v) {_vm.$set(_vm.alarmDialogModal, \"modal\", $$v)},expression:\"alarmDialogModal.modal\"}},[_c('Form',{ref:\"alarmForm\",attrs:{\"model\":_vm.alarmForm,\"label-width\":90}},[_c('FormItem',{attrs:{\"label\":\"告警名称:\",\"prop\":\"alarmName\"}},[_c('Input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入告警名称\",\"maxlength\":64},model:{value:(_vm.alarmForm.alarmName),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"alarmName\", $$v)},expression:\"alarmForm.alarmName\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"告警水位:\",\"prop\":\"alarmLine\"}},[_c('Input',{staticStyle:{\"width\":\"70px\"},attrs:{\"type\":\"number\"},model:{value:(_vm.alarmForm.alarmLine),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"alarmLine\", $$v)},expression:\"alarmForm.alarmLine\"}}),_vm._v(\" 米\\n      \")],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"告警开关:\",\"prop\":\"status\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},on:{\"on-change\":_vm.switchChange},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"ON\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"OFF\")])]},proxy:true}]),model:{value:(_vm.alarmForm.status ==1 ?true :false),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"status ==1 ?true :false\", $$v)},expression:\"alarmForm.status ==1 ?true :false\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"告警频率:\",\"prop\":\"frequency\"}},[_c('Select',{staticStyle:{\"width\":\"100px\"},model:{value:(_vm.alarmForm.frequency),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"frequency\", $$v)},expression:\"alarmForm.frequency\"}},_vm._l((_vm.frequencyList),function(f,index){return _c('Option',{key:index,attrs:{\"value\":f}},[_vm._v(_vm._s(f)+\"分钟/次\")])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"通知人:\",\"prop\":\"receivers\"}},[_c('Select',{staticStyle:{\"width\":\"400px\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择通知人\"},model:{value:(_vm.alarmForm.receivers),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"receivers\", $$v)},expression:\"alarmForm.receivers\"}},_vm._l((_vm.receiverList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.openid}},[_vm._v(_vm._s(item.nickName))])}),1)],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\",\"size\":\"large\"},on:{\"click\":_vm.alarmDialogCancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"loading\":_vm.alarmDialogModal.loading},on:{\"click\":_vm.alarmDialogSubmit}},[_vm._v(\"保存\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var vue_control = (esExports);\n// CONCATENATED MODULE: ./src/pages/screen/control/vue/control.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"IUPf\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  control,\n  vue_control,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var control_vue_control = (Component.exports);\n\n// CONCATENATED MODULE: ./src/pages/screen/control/control.js\n\n\n\n\n\n/** 自定义全局样式 **/\n\n\n\n\nvue_default.a.use(iview_default.a);\nvue_default.a.use(vue_bus_esm[\"a\" /* default */]);\n\nnew vue_default.a({\n  el: '#control',\n  components: { 'control-component': control_vue_control }\n});\n\n/***/ })\n\n},[1]);\n\n\n// WEBPACK FOOTER //\n// static/js/control.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a18f33b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!../../../../../node_modules/iview-loader/index.js??ref--0-1!./control.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!../../../../../node_modules/iview-loader/index.js??ref--0-1!./control.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!../../../../../node_modules/iview-loader/index.js??ref--0-1!./control.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a18f33b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!../../../../../node_modules/iview-loader/index.js??ref--0-1!./control.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/screen/control/vue/control.vue\n// module id = null\n// module chunks = ","import axios from 'axios'\n\nconst AjaxUtil = {\n  ROOT: '/screen'\n}\n\nAjaxUtil.ajax = axios.create({\n  baseURL: AjaxUtil.ROOT,\n  timeout: 120000,\n  responseType: 'json'\n})\n\nAjaxUtil.ajax.interceptors.response.use(\n  function (response) {\n    return response.data\n  },\n  function (error) {\n    return Promise.reject(error)\n  }\n)\n\nexport default AjaxUtil\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/lib/axios.js","<template>\n  <!--search-->\n  <div style=\"margin:10px\" @click=\"drawerMove\" >\n    <Drawer title=\"泵站设置\" v-model=\"setDrawer\" placement=\"left\" :closable=\"false\">\n      <Select style=\"margin-top: 60px;width: 200px;margin-left: 15px\" v-model=\"selectStationId\" :label-in-value=\"true\" @on-change=\"stationChange\">\n        <Option v-for=\"station in stationList\" :value=\"station.id\" :key=\"station.id\">{{station.name}}</Option>\n      </Select>\n      <Button type=\"primary\" @click=\"initAlarmDialog\" style=\"margin-top: 60px;margin-left: 15px ;width:200px\">水位报警设置</Button>\n    </Drawer>\n    <card dis-hover class=\"card-top\" >\n      <p slot=\"title\" style=\"text-align: center\">{{selectStationName}}</p>\n      <div>\n        <card dis-hover class=\"card-content\">\n          <p slot=\"title\" style=\"font-size: xx-small\">外河水位</p>\n          {{outsideVal}}&nbsp;米\n        </card>\n        <card dis-hover class=\"card-content\">\n          <p slot=\"title\" style=\"font-size: xx-small\">前池水位</p>\n          {{foreVal}}&nbsp;米\n        </card>\n        <card dis-hover class=\"card-content\" :class=\"isAlarm ? 'warnFont' : '' \">\n          <p slot=\"title\" style=\"font-size: xx-small\">内河水位</p>\n          {{insideVal}}&nbsp;米\n        </card>\n        <div style=\"display: inline-block;\" v-for=\"count of pumpCount\" :value=\"count\" :key=\"count\">\n          <card dis-hover class=\"card-building\">\n            <p slot=\"title\" style=\"font-size: xx-small\">{{count}}#机组</p>\n              <p>A相电压:{{pumpData[count-1].va}}V；A相电流:{{pumpData[count-1].aa}}A</p>\n              <p>B相电压:{{pumpData[count-1].vb}}V；B相电流:{{pumpData[count-1].ab}}A</p>\n              <p>C相电压:{{pumpData[count-1].vc}}V；C相电流:{{pumpData[count-1].ac}}A</p>\n          </card>\n        </div>\n      </div>\n    </card>\n    <Modal title=\"水位告警配置\" v-bind:closable='false' width=\"45\" v-model='alarmDialogModal.modal' closable\n           @on-cancel=\"alarmDialogCancel\"\n           :mask-closable=\"alarmDialogModal.closable\">\n\n      <Form :model=\"alarmForm\" ref=\"alarmForm\" :label-width=\"90\">\n        <FormItem label=\"告警名称:\" prop=\"alarmName\">\n          <Input v-model=\"alarmForm.alarmName\" placeholder=\"请输入告警名称\" style=\"width:400px\"\n                 :maxlength=\"64\"/>\n        </FormItem>\n        <FormItem label=\"告警水位:\" prop=\"alarmLine\">\n          <Input type=\"number\" v-model=\"alarmForm.alarmLine\" style=\"width: 70px\"/>&nbsp;米\n        </FormItem>\n        <FormItem label=\"告警开关:\" prop=\"status\">\n          <i-switch size=\"large\" v-model=\"alarmForm.status ==1 ?true :false\" @on-change=\"switchChange\">\n            <template #open>\n              <span>ON</span>\n            </template>\n            <template #close>\n              <span>OFF</span>\n            </template>\n          </i-switch>\n        </FormItem>\n        <FormItem label=\"告警频率:\" prop=\"frequency\">\n          <Select v-model=\"alarmForm.frequency\" style=\"width: 100px;\">\n            <Option v-for=\"(f,index) in frequencyList\" :value=\"f\" :key=\"index\">{{f}}分钟/次</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"通知人:\" prop=\"receivers\">\n          <Select v-model=\"alarmForm.receivers\" multiple filterable style=\"width: 400px;\" placeholder=\"请选择通知人\">\n            <Option v-for=\"item in receiverList\" :value=\"item.openid\" :key=\"item.id\">{{item.nickName}}</Option>\n          </Select>\n        </FormItem>\n      </Form>\n      <div slot='footer'>\n        <Button type='text' size='large' @click='alarmDialogCancel'>取消</Button>\n        <Button type='primary' size='large' :loading=\"alarmDialogModal.loading\" @click='alarmDialogSubmit'>保存\n        </Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\n  import $ from '../../../../common/lib/axios.js'\n  import Qs from 'qs'\n\n  export default {\n    name: 'control',\n    data: function () {\n      return {\n        selectStationId:1,\n        selectStationName:'',\n        setDrawer:false,\n        isAlarm: false,\n        insideVal: 0.01,\n        foreVal: 0.01,\n        outsideVal: 0.01,\n        timer: '',\n        receiverList: [],\n        stationList:[],\n        pumpData:[],\n        pumpCount:4,\n        frequencyList: [\"5\", \"10\", \"15\", \"30\", \"45\", \"60\"],\n        alarmDialogModal: {\n          modal: false,\n          closable: false,\n          loading: false\n        },\n        alarmForm: {\n          id: null,\n          stationId: 1,\n          alarmName: \"\",\n          alarmLine: 0.00,\n          frequency: 5,\n          receivers: [],\n          status: 0\n        }\n      }\n    },\n    methods: {\n      init: function () {\n        this.getStationList()\n        this.getWaterLine()\n        this.getPumpData()\n        this.timer = setInterval(() => {\n          this.initData()\n         }, 10000)\n      },\n      initData:function(){\n        this.getWaterLine()\n        this.getPumpData()\n      },\n      getPumpCount:function(){\n        $.ajax.post('/control/getPumpCount?stationId='+this.selectStationId)\n          .then(data => {\n            if (null != data) {\n              this.pumpCount = data\n            }\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n      },\n      getStationList:function(){\n        $.ajax.post('/station/getStationData')\n          .then(data => {\n            if (null != data) {\n              this.stationList = data.stationList\n              this.selectStationId=data.defaultStation.id\n              this.selectStationName=data.defaultStation.name\n            }\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n      },\n      stationChange:function(stationVal){\n        this.selectStationId=stationVal.value\n        this.selectStationName=stationVal.label\n        this.alarmForm.stationId=stationVal.value\n        this.initData()\n      },\n      drawerMove:function(){\n        this.setDrawer=true\n      },\n      getWXReceivers: function () {\n        $.ajax.post('/control/getWXReceivers')\n          .then(data => {\n            if (null != data) {\n              this.receiverList = data\n            }\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n      },\n      getPumpData:function(){\n        $.ajax.post('/control/getPumpData?stationId='+this.selectStationId)\n          .then(data => {\n            if (null != data) {\n              // this.pumpCount=data.length\n              this.pumpData=data\n            }\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n      },\n      getWaterLine: function () {\n        $.ajax.post('/control/getWaterLine?stationId='+this.selectStationId)\n          .then(data => {\n            let code = data.code;\n            if (\"200\" !== code) {\n              return\n            }\n            const alarmLine = data.alarmLine\n            this.insideVal = data.insideVal\n            this.outsideVal = data.outsideVal\n            this.foreVal = data.foreVal\n            if (alarmLine !== 0 && this.insideVal >= alarmLine) {\n              this.isAlarm = true\n            } else {\n              this.isAlarm = false\n            }\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n      },\n      alarmDialogSubmit: function () {\n        this.alarmDialogModal.loading = true\n        if (!this.formValidate()) {\n          return\n        }\n        let reqData = Qs.stringify(this.alarmForm, {allowDots: true})\n        $.ajax.post('/control/alarmConfigSave', reqData)\n          .then((resp) => {\n            if (resp) {\n              this.$Message.success('报警设置成功！')\n            } else {\n              this.confirmAlert('报警设置失败！')\n            }\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n        this.alarmDialogCancel()\n      },\n      formValidate: function () {\n        if (this.alarmForm.alarmName == '') {\n          this.confirmAlert('报警名称不能为空')\n          return false\n        }\n        if (this.alarmForm.alarmLine == '') {\n          this.confirmAlert('报警水位不能为空')\n          return false\n        }\n        if (this.alarmForm.receivers.length == 0) {\n          this.confirmAlert('通知人不能为空')\n          return false\n        }\n        return true\n      },\n      confirmAlert: function (message) {\n        const content = '<p>' + message + '</p>'\n        this.$Message.warning({\n          content: content,\n          duration: 3\n        })\n      },\n      alarmMessage: function (alarmLine) {\n        this.$Message.error({\n          background: true,\n          content: '当前内河水位已超' + alarmLine + '米的警戒水位，请及时处置！',\n          top: 50,\n          duration: 3\n        })\n      },\n      switchChange: function (flag) {\n        this.alarmForm.status = flag ? 1 : 0\n      },\n      initAlarmDialog: function () {\n        this.getWXReceivers()\n        $.ajax.post('/control/getAlarmConfig?stationId=' + this.alarmForm.stationId)\n          .then((form) => {\n            if (form) {\n              this.alarmForm.id = form.id\n              this.alarmForm.alarmName = form.alarmName\n              this.alarmForm.alarmLine = form.alarmLine\n              this.alarmForm.receivers = form.receivers\n              this.alarmForm.frequency = form.frequency\n              this.alarmForm.status = form.status\n            }\n            this.alarmDialogModal.modal = true\n          }).catch(function (reason) {\n          console.log(reason)\n        })\n      },\n      alarmDialogCancel: function () {\n        this.alarmDialogModal.modal = false\n        this.alarmDialogModal.closable = true\n        this.alarmDialogModal.loading = false\n        this.alarmForm.id = null\n        this.alarmForm.status = 0\n        this.alarmForm.frequency = 5\n        this.alarmForm.alarmName = \"\"\n        this.alarmForm.alarmLine = 0.00\n        this.alarmForm.receivers = []\n      }\n    },\n    created() {\n      this.init()\n    },\n    beforeDestroy() {\n      clearInterval(this.timer);\n    },\n  }\n</script>\n\n\n<style>\n  .card-top {\n    margin-top: 10px;\n  }\n\n  .card-content {\n    margin: 2px;\n    height: 105px;\n    width: 85px;\n    display: inline-block;\n    background: #a5def3;\n  }\n\n  .card-building {\n    margin: 2px;\n    background: #fffff9;\n    height:150px;\n    width:270px\n    /*text-align: center;*/\n    /*align-content: center;*/\n  }\n\n  .warnFont {\n    -webkit-text-fill-color: red;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/screen/control/vue/control.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin\":\"10px\"},on:{\"click\":_vm.drawerMove}},[_c('Drawer',{attrs:{\"title\":\"泵站设置\",\"placement\":\"left\",\"closable\":false},model:{value:(_vm.setDrawer),callback:function ($$v) {_vm.setDrawer=$$v},expression:\"setDrawer\"}},[_c('Select',{staticStyle:{\"margin-top\":\"60px\",\"width\":\"200px\",\"margin-left\":\"15px\"},attrs:{\"label-in-value\":true},on:{\"on-change\":_vm.stationChange},model:{value:(_vm.selectStationId),callback:function ($$v) {_vm.selectStationId=$$v},expression:\"selectStationId\"}},_vm._l((_vm.stationList),function(station){return _c('Option',{key:station.id,attrs:{\"value\":station.id}},[_vm._v(_vm._s(station.name))])}),1),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-top\":\"60px\",\"margin-left\":\"15px\",\"width\":\"200px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.initAlarmDialog}},[_vm._v(\"水位报警设置\")])],1),_vm._v(\" \"),_c('card',{staticClass:\"card-top\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.selectStationName))]),_vm._v(\" \"),_c('div',[_c('card',{staticClass:\"card-content\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"外河水位\")]),_vm._v(\"\\n        \"+_vm._s(_vm.outsideVal)+\" 米\\n      \")]),_vm._v(\" \"),_c('card',{staticClass:\"card-content\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"前池水位\")]),_vm._v(\"\\n        \"+_vm._s(_vm.foreVal)+\" 米\\n      \")]),_vm._v(\" \"),_c('card',{staticClass:\"card-content\",class:_vm.isAlarm ? 'warnFont' : '',attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"内河水位\")]),_vm._v(\"\\n        \"+_vm._s(_vm.insideVal)+\" 米\\n      \")]),_vm._v(\" \"),_vm._l((_vm.pumpCount),function(count){return _c('div',{key:count,staticStyle:{\"display\":\"inline-block\"},attrs:{\"value\":count}},[_c('card',{staticClass:\"card-building\",attrs:{\"dis-hover\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"xx-small\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(count)+\"#机组\")]),_vm._v(\" \"),_c('p',[_vm._v(\"A相电压:\"+_vm._s(_vm.pumpData[count-1].va)+\"V；A相电流:\"+_vm._s(_vm.pumpData[count-1].aa)+\"A\")]),_vm._v(\" \"),_c('p',[_vm._v(\"B相电压:\"+_vm._s(_vm.pumpData[count-1].vb)+\"V；B相电流:\"+_vm._s(_vm.pumpData[count-1].ab)+\"A\")]),_vm._v(\" \"),_c('p',[_vm._v(\"C相电压:\"+_vm._s(_vm.pumpData[count-1].vc)+\"V；C相电流:\"+_vm._s(_vm.pumpData[count-1].ac)+\"A\")])])],1)})],2)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"水位告警配置\",\"closable\":false,\"width\":\"45\",\"closable\":\"\",\"mask-closable\":_vm.alarmDialogModal.closable},on:{\"on-cancel\":_vm.alarmDialogCancel},model:{value:(_vm.alarmDialogModal.modal),callback:function ($$v) {_vm.$set(_vm.alarmDialogModal, \"modal\", $$v)},expression:\"alarmDialogModal.modal\"}},[_c('Form',{ref:\"alarmForm\",attrs:{\"model\":_vm.alarmForm,\"label-width\":90}},[_c('FormItem',{attrs:{\"label\":\"告警名称:\",\"prop\":\"alarmName\"}},[_c('Input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入告警名称\",\"maxlength\":64},model:{value:(_vm.alarmForm.alarmName),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"alarmName\", $$v)},expression:\"alarmForm.alarmName\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"告警水位:\",\"prop\":\"alarmLine\"}},[_c('Input',{staticStyle:{\"width\":\"70px\"},attrs:{\"type\":\"number\"},model:{value:(_vm.alarmForm.alarmLine),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"alarmLine\", $$v)},expression:\"alarmForm.alarmLine\"}}),_vm._v(\" 米\\n      \")],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"告警开关:\",\"prop\":\"status\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},on:{\"on-change\":_vm.switchChange},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"ON\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"OFF\")])]},proxy:true}]),model:{value:(_vm.alarmForm.status ==1 ?true :false),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"status ==1 ?true :false\", $$v)},expression:\"alarmForm.status ==1 ?true :false\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"告警频率:\",\"prop\":\"frequency\"}},[_c('Select',{staticStyle:{\"width\":\"100px\"},model:{value:(_vm.alarmForm.frequency),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"frequency\", $$v)},expression:\"alarmForm.frequency\"}},_vm._l((_vm.frequencyList),function(f,index){return _c('Option',{key:index,attrs:{\"value\":f}},[_vm._v(_vm._s(f)+\"分钟/次\")])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"通知人:\",\"prop\":\"receivers\"}},[_c('Select',{staticStyle:{\"width\":\"400px\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择通知人\"},model:{value:(_vm.alarmForm.receivers),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"receivers\", $$v)},expression:\"alarmForm.receivers\"}},_vm._l((_vm.receiverList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.openid}},[_vm._v(_vm._s(item.nickName))])}),1)],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\",\"size\":\"large\"},on:{\"click\":_vm.alarmDialogCancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"loading\":_vm.alarmDialogModal.loading},on:{\"click\":_vm.alarmDialogSubmit}},[_vm._v(\"保存\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a18f33b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/iview-loader??ref--0-1!./src/pages/screen/control/vue/control.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport iView from 'iview'\nimport VueBus from 'vue-bus'\nimport 'iview/dist/styles/iview.css'\n\n/** 自定义全局样式 **/\nimport '../../../common/css/common.css'\n\nimport controlComponent from './vue/control'\n\nVue.use(iView)\nVue.use(VueBus)\n\nnew Vue({\n  el: '#control',\n  components: {'control-component': controlComponent}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/screen/control/control.js"],"sourceRoot":""}